// import Home from "pages/home/home.component.js";
import { render } from "@testing-library/react";
import { StaticRouter } from "react-router-dom/server.js";
import ReactSsrApp from "src/index.js";
import { createContextClient } from "src/core/functions/create-context.js";
import { getRoute } from "src/core/functions/get-route.js";
import { ContextDataWithStore } from "src/core/models/context-with-store.model.js";
import { AppStore, createStore } from "src/redux/create-store.js";

describe("Home Page", () => {
  it("Should render Home Page without error", async () => {
    const requestUrl = "http://www.test-domain.com";
    const url = new URL(requestUrl);
    const ctx: ContextDataWithStore = {
      ...createContextClient(
        { pathname: url.pathname, state: "", hash: url.hash, key: "", search: url.search },
        new URLSearchParams(),
        {},
      ),
      store: createStore() as AppStore,
    };
    const route = getRoute(url.pathname);
    if (!route) {
      throw new Error("requestUrl is not valid");
    }
    const module = await route?.component();
    render(
      <StaticRouter location={url}>
        <ReactSsrApp module={module} ctx={ctx} />
      </StaticRouter>,
    );
  });
});
